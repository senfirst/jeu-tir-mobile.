<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jeu des Mots ULTIME</title>

<style>
body {
    margin:0;
    overflow:hidden;
    font-family:Arial;
    background:black;
    color:white;
    text-align:center;
}
canvas {
    position:fixed;
    top:0;
    left:0;
    z-index:-1;
}
.menu, .game {
    margin-top:100px;
}
button {
    padding:15px 25px;
    margin:10px;
    font-size:18px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    background:#f1c40f;
}
#word { font-size:36px; letter-spacing:10px; margin:20px; }
</style>
</head>

<body>

<canvas id="stars"></canvas>

<div class="menu" id="menu">
<h1>üéÆ Jeu des Mots</h1>
<button onclick="startMenu()">‚ñ∂Ô∏è Jouer</button>
<button onclick="quitGame()">‚ùå Quitter</button>
</div>

<div class="game" id="game" style="display:none">
<div id="category"></div>
<div id="word"></div>
<div id="letters"></div>
<div id="lives"></div>
<div id="score"></div>
<div id="bestScore"></div>
<button onclick="giveHint()">üí° Indice</button>
</div>

<!-- MUSIQUE INTEGREE -->
<audio id="music" src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b9b5b0a.mp3" loop></audio>

<audio id="correctSound" src="correct.mp3"></audio>
<audio id="wrongSound" src="wrong.mp3"></audio>

<script>
// √©toiles anim√©es
const canvas=document.getElementById("stars");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
let stars=[];
for(let i=0;i<100;i++){
stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*2});
}
function drawStars(){
ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.fillStyle="white";
stars.forEach(s=>{
ctx.beginPath();
ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
ctx.fill();
s.y+=0.5;
if(s.y>canvas.height)s.y=0;
});
requestAnimationFrame(drawStars);
}
drawStars();

// menu
function startMenu(){
document.getElementById("menu").style.display="none";
document.getElementById("game").style.display="block";
document.getElementById("music").play();
startGame();
}
function quitGame(){
alert("Merci d'avoir jou√© !");
}

// jeu
const words=[
{word:"chat",category:"Animal"},
{word:"senegal",category:"Pays"},
{word:"ordinateur",category:"Tech"},
{word:"mosquee",category:"Religion"},
{word:"pomme",category:"Fruit"}
];

let score=0;
let bestScore=localStorage.getItem("bestScore")||0;
let selectedWord="";
let displayWord=[];
let lives=6;
let hintUsed=false;

function updateLives(){
document.getElementById("lives").innerText="‚ù§Ô∏è".repeat(lives);
}

function startGame(){
let chosen=words[Math.floor(Math.random()*words.length)];
selectedWord=chosen.word;
document.getElementById("category").innerText="Cat√©gorie : "+chosen.category;
displayWord=Array(selectedWord.length).fill("_");
lives=6;
hintUsed=false;
updateLives();
document.getElementById("word").innerText=displayWord.join(" ");
document.getElementById("score").innerText="Score : "+score;
document.getElementById("bestScore").innerText="Meilleur Score : "+bestScore;
generateButtons();
}

function generateButtons(){
const lettersDiv=document.getElementById("letters");
lettersDiv.innerHTML="";
for(let i=65;i<=90;i++){
let letter=String.fromCharCode(i).toLowerCase();
let btn=document.createElement("button");
btn.innerText=letter;
btn.onclick=()=>guess(letter,btn);
lettersDiv.appendChild(btn);
}
}

function guess(letter,btn){
btn.disabled=true;
let correct=false;
for(let i=0;i<selectedWord.length;i++){
if(selectedWord[i]===letter){
displayWord[i]=letter;
correct=true;
}
}
document.getElementById("word").innerText=displayWord.join(" ");
if(!correct){
lives--;
updateLives();
}
checkWin();
}

function giveHint(){
if(hintUsed)return;
let hidden=[];
for(let i=0;i<displayWord.length;i++){
if(displayWord[i]==="_")hidden.push(i);
}
if(hidden.length===0)return;
let rand=hidden[Math.floor(Math.random()*hidden.length)];
displayWord[rand]=selectedWord[rand];
document.getElementById("word").innerText=displayWord.join(" ");
hintUsed=true;
}

function checkWin(){
if(!displayWord.includes("_")){
score++;
if(score>bestScore){
bestScore=score;
localStorage.setItem("bestScore",bestScore);
}
startGame();
}
if(lives<=0){
alert("Game Over ! Mot : "+selectedWord);
score=0;
startGame();
}
}
</script>

</body>
</html>
